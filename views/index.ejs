<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <title>Lugares Turísticos</title>
</head>
<body>
    <div class="container mt-4">

        <h1 class="mb-4">Lugares Turísticos de Colombia</h1>

         <!-- Formulario para agregar un nuevo lugar turístico -->
    <form id="touristPlaceForm" class="mb-5">
        <div class="mb-3">
            <label for="name" class="form-label">Nombre del lugar</label>
            <input type="text" class="form-control" id="name" required>
        </div>
        <div class="mb-3">
            <label for="department" class="form-label">Departamento</label>
            <select class="form-select" id="department" required>
                <option value="">Seleccione un departamento</option>
                <% departments.sort((a, b) => a.name.localeCompare(b.name)).forEach(dept => { %>
                    <option value="<%= dept.code %>"><%= dept.name %></option>
                <% }) %>
            </select>
        </div>
        <div class="mb-3">
            <label for="town" class="form-label">Municipio</label>
            <select class="form-select" id="town" required>
                <option value="">Seleccione un municipio</option>
            </select>
        </div>
        <div class="mb-3">
            <label for="description" class="form-label">Descripción</label>
            <textarea class="form-control" id="description" rows="3" required></textarea>
        </div>
        <div class="mb-3">
            <label for="attractions" class="form-label">Atracciones (separadas por coma)</label>
            <input type="text" class="form-control" id="attractions" required>
        </div>
        <div class="mb-3">
            <label for="bestTimeToVisit" class="form-label">Mejor época para visitar</label>
            <input type="text" class="form-control" id="bestTimeToVisit" required>
        </div>
        <button type="submit" class="btn btn-primary">Agregar Lugar</button>
    </form>

    <!-- Tabla que muestra los lugares turísticos -->
    <h2 class="mb-3">Lugares Registrados</h2>
    <table class="table table-striped" id="touristPlacesTable">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Departamento</th>
                <th>Municipio</th>
                <th>Descripción</th>
                <th>Atracciones</th>
                <th>Mejor época para visitar</th>
            </tr>
        </thead>
        <tbody>
            <% for(const [k, v] of data) { %>
                <tr>
                    <td><%= v.name %></td>
                    <td><%= departments.find(d => d.code === v.department).name %></td>
                    <td><%= towns.find(t => t.code === v.town).name %></td>
                    <td><%= v.description %></td>
                    <td><%= v.attractions.join(', ') %></td>
                    <td><%= v.bestTimeToVisit %></td>
                </tr>
            <% } %>
        </tbody>
    </table>

    <%- include('./templates/footer.ejs')%>

    <script src="/js/scripts.js"></script>

</body>
</html>